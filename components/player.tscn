[gd_scene load_steps=27 format=3 uid="uid://ds441iire4rx0"]

[ext_resource type="Script" path="res://scripts/player_3d.gd" id="1_qyib2"]
[ext_resource type="SpriteFrames" uid="uid://c57grhb3pijbp" path="res://components/player-anim.tres" id="1_w5bfb"]
[ext_resource type="Texture2D" uid="uid://deypuc6e3pjto" path="res://assets/sprites/Effects/dust_poof_8x8.png" id="3_jo2eh"]
[ext_resource type="AudioStream" uid="uid://vukb0a0jvwbe" path="res://assets/audio/fx/player/Run/Dirt/DIRT - Run 1.wav" id="4_lhx1v"]
[ext_resource type="AudioStream" uid="uid://byae242nmtvvu" path="res://assets/audio/fx/player/Walk/Dirt/DIRT - Walk Short 1.wav" id="4_wasyd"]
[ext_resource type="Script" path="res://scripts/player/idle.gd" id="5_b4jip"]
[ext_resource type="AudioStream" uid="uid://b32mngdtb6hh2" path="res://assets/audio/fx/player/Walk/Dirt/DIRT - Walk Short 2.wav" id="5_hky1e"]
[ext_resource type="AudioStream" uid="uid://vt2elbsjmur0" path="res://assets/audio/fx/player/Run/Dirt/DIRT - Run Short 1.wav" id="5_nf6kb"]
[ext_resource type="Script" path="res://scripts/state/statemachine.gd" id="5_qfjxs"]
[ext_resource type="AudioStream" uid="uid://dbk4tc8x0nhf7" path="res://assets/audio/fx/player/Walk/Dirt/DIRT - Walk Short 3.wav" id="6_7irag"]
[ext_resource type="AudioStream" uid="uid://ggk7womte5rc" path="res://assets/audio/fx/player/Run/Dirt/DIRT - Run 2.wav" id="6_73280"]
[ext_resource type="Script" path="res://scripts/player/walk.gd" id="6_iolu4"]
[ext_resource type="AudioStream" uid="uid://di3tk0exi7n4e" path="res://assets/audio/fx/player/Walk/Dirt/DIRT - Walk Short 4.wav" id="7_4u15g"]
[ext_resource type="Script" path="res://scripts/player/sprint.gd" id="7_ibwta"]
[ext_resource type="AudioStream" uid="uid://f8g6nlr6xnl" path="res://assets/audio/fx/player/Run/Dirt/DIRT - Run 6.wav" id="7_imitl"]
[ext_resource type="Script" path="res://scripts/player/dash.gd" id="8_236uc"]
[ext_resource type="AudioStream" uid="uid://duoyrb35witj4" path="res://assets/audio/fx/player/Run/Dirt/DIRT - Run Short 2.wav" id="8_mjjpi"]
[ext_resource type="AudioStream" uid="uid://1uo6inp0nbmf" path="res://assets/audio/fx/roll.wav" id="12_0h12d"]

[sub_resource type="BoxShape3D" id="BoxShape3D_gq67s"]
size = Vector3(0.12207, 0.161133, 0.102417)

[sub_resource type="AnimatedTexture" id="AnimatedTexture_a4uh1"]
frame_0/texture = ExtResource("3_jo2eh")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_x16ag"]
transparency = 1
albedo_texture = SubResource("AnimatedTexture_a4uh1")
texture_filter = 0
texture_repeat = false
disable_receive_shadows = true
billboard_mode = 3
particles_anim_h_frames = 5
particles_anim_v_frames = 1
particles_anim_loop = true
grow_amount = -1.006

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_gk2y3"]
gravity = Vector3(2.08165e-12, 2.08165e-12, 2.08165e-12)

[sub_resource type="QuadMesh" id="QuadMesh_w4woo"]
size = Vector2(0.05, 0.05)

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_jwo77"]
random_pitch = 1.34
random_volume_offset_db = 1.61
streams_count = 6
stream_0/stream = ExtResource("4_lhx1v")
stream_0/weight = 1.0
stream_1/stream = ExtResource("5_nf6kb")
stream_1/weight = 1.0
stream_2/stream = ExtResource("6_73280")
stream_2/weight = 1.0
stream_3/stream = ExtResource("7_imitl")
stream_3/weight = 1.0
stream_4/stream = ExtResource("7_imitl")
stream_4/weight = 1.0
stream_5/stream = ExtResource("8_mjjpi")
stream_5/weight = 1.0

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_r8v1c"]
resource_local_to_scene = true
streams_count = 6
stream_0/stream = ExtResource("4_wasyd")
stream_0/weight = 1.0
stream_1/stream = ExtResource("5_hky1e")
stream_1/weight = 1.0
stream_2/stream = ExtResource("6_7irag")
stream_2/weight = 1.0
stream_3/stream = ExtResource("7_4u15g")
stream_3/weight = 1.0
stream_4/stream = ExtResource("4_wasyd")
stream_4/weight = 1.0
stream_5/stream = ExtResource("5_hky1e")
stream_5/weight = 1.0

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_dmqu6"]
random_pitch = 1.4
random_volume_offset_db = 1.08
streams_count = 1
stream_0/stream = ExtResource("12_0h12d")
stream_0/weight = 1.0

[node name="Player" type="CharacterBody3D" groups=["Player"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0475994, 0)
script = ExtResource("1_qyib2")

[node name="Sprite" type="AnimatedSprite3D" parent="."]
transform = Transform3D(1, -4.68079e-16, 3.27752e-16, 3.27752e-16, 0.939693, 0.34202, -4.68079e-16, -0.34202, 0.939693, 2.08165e-12, 0.0448156, -0.059)
double_sided = false
alpha_cut = 2
texture_filter = 0
sprite_frames = ExtResource("1_w5bfb")
animation = &"idle"

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00017105, 0.109069, -0.0678101)
shape = SubResource("BoxShape3D_gq67s")

[node name="FootstepParticles" type="GPUParticles3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0532495, -0.0239117)
material_override = SubResource("StandardMaterial3D_x16ag")
emitting = false
amount = 4
lifetime = 1.06
visibility_aabb = AABB(-1, -1, -1, 2, 2, 2)
process_material = SubResource("ParticleProcessMaterial_gk2y3")
draw_pass_1 = SubResource("QuadMesh_w4woo")

[node name="AudioSprint" type="AudioStreamPlayer3D" parent="."]
stream = SubResource("AudioStreamRandomizer_jwo77")
volume_db = -13.0
bus = &"Player"

[node name="AudioWalk" type="AudioStreamPlayer3D" parent="."]
stream = SubResource("AudioStreamRandomizer_r8v1c")
volume_db = -16.0
bus = &"Player"

[node name="AudioDash" type="AudioStreamPlayer3D" parent="."]
stream = SubResource("AudioStreamRandomizer_dmqu6")
volume_db = -16.0
bus = &"Player"

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("5_qfjxs")
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine"]
script = ExtResource("5_b4jip")

[node name="Walk" type="Node" parent="StateMachine" node_paths=PackedStringArray("audio")]
script = ExtResource("6_iolu4")
MAX_WALK_SPEED = null
audio = NodePath("../../AudioWalk")
STEP_DELAY = null

[node name="Sprint" type="Node" parent="StateMachine" node_paths=PackedStringArray("audio")]
script = ExtResource("7_ibwta")
MAX_SPRINT_SPEED = 1.5
audio = NodePath("../../AudioSprint")

[node name="Dash" type="Node" parent="StateMachine" node_paths=PackedStringArray("audio")]
script = ExtResource("8_236uc")
DASH_SPEED = 3.0
DASH_DURATION = 0.361
audio = NodePath("../../AudioDash")
